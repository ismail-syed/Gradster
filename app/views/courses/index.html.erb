<h1 class="page-header">
	<%= current_user.profile_name %>'s Courses
</h1>

<% user_courses = 0 %> 

<% @courses.each do |course| %>
 	<% if (course.user_id == current_user.id) %>
 		<% user_courses = user_courses + 1 %>
		  <div class="course"> 
			 	
			  <h3 class="col-md-12"> 
			  	<%= link_to course.name.upcase , course %> 
					<div class="pull-right" > 
						<%= link_to "Edit", course, :class => 'btn btn-sm btn-info'  %>
			      <%= link_to "Delete", course, method: :delete,
			       		data:{confirm: "Are you sure you want to delete this?"}, :class => 'btn btn-sm btn-danger'  %>
			    </div>
			  </h3>  

			   
			  </br>
		  
			    <!-- EXPANDABLE PANEL -->
					<div class="container">
					    <div class="row">
					        <div class="col-md-12">
					            <div class="panel panel-primary">
					                <div class="panel-heading clickable">
					                    <h3 class="panel-title">
					                    	<% course.grade = 0 if course.components.count == 0 %>
					                    	<% if course.grade == 0 %> 
													  			<strong> You haven't added any marks </strong> 
													  		<% else %> 
														  		<strong> Grade: </strong> <%= course.grade.round(2)%> %
														  	<% end %> 
														  </h3>

					                    <span class="pull-right">
					                    	<i class="glyphicon glyphicon-minus"></i>
					                    </span>
					                </div>
					                <div class="panel-body">
					                	<!-- DISPLAY COURSE COMPONENTS -->
					                	<% course.components.each do |components| %>
						                	<div id="component-overview">
						                		<span>
								                	<strong> <%= components.name %> </strong> 
								                	<em>(<%=components.component_weight%>%)</em>: 
								                	<div class="component-grade" >
									                	<% if components.grade == 0 %>  
									                		You haven't added any grades yet.
									                	<% else %> 
										                	<%= components.grade%>% 
								                		<%end%> 
										              </div> </br>
							                	</span> 
								               </div> 	
					                	<%end%> 
					                </div>
					            </div>
					        </div>
					    </div>    
					</div>

		  </div>
	<% end %>  
<% end %> 
<br />

<div id="add-course-message">
	<% if user_courses == 0 %> 
		<h3> Create some courses to get started with Gradster! </h3>
	<% end %>
</div> 


<div class="add-course-btn">
		<%= link_to 'Create Course', '#add-course-modal', 'data-toggle' => 'modal',	:class => 'btn btn-success' %>
</div>

<!-- ADD COURSE MODAL -->
<div class="modal fade" id="add-course-modal" tabindex="-1" role="dialog" aria-labelledby="largeModal" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">

      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h2 class="modal-title" id="myModalLabel">Create Course</h2>
      </div>

      <div class="modal-body">
		<%= render :partial => 'courses/new_course',  modal: true %>
      </div>
	 
    </div>
  </div>
</div>

